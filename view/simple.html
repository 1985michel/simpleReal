<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,900;1,100;1,300;1,400;1,500;1,900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../styles/style.css">


    <!-- <script src="../classes/conta.js"></script>
    <script src="vuecore.js"></script> -->


    <link rel="stylesheet" href="">


    <style>
        .azul {
            background-color: dodgerblue;
        }

        .vermelha {
            background-color: red;
        }

        .verde {
            background-color: green;
        }
    </style>


</head>

<body>
    <div id="app">
        <v-app>
            <v-main>

                <v-container class=" lighten-5 mb-12 grey">


                    <p class="text-center  pa-6 "><span class="display-3 font-weight-thin">Simple</span>
                        <span class="display-1 font-weight-thin">and</span><span class="display-3">Real</span>
                    </p>

                    <v-row no-gutters>
                        <v-col class=" col-3">

                            <v-card class="pa-2" outlined tile>

                                <v-row justify="space-around">

                                    <v-col>
                                        <v-card class="pa-4" outlined>
                                            <div class="d-flex">
                                                <v-spacer></v-spacer>
                                                <h3 class="title d-flex align-center justify-center"
                                                    @click="expandContas = !expandContas" style="width: 100%;">
                                                    Contas
                                                    <v-icon>{{
                                                        expandContas ?
                                                        'mdi-chevron-up'
                                                        :
                                                        'mdi-chevron-down' }}
                                                    </v-icon>
                                                </h3>
                                                <v-spacer></v-spacer>
                                                <v-btn class="mx-2" outlined small fab color="blue-grey darken-4"
                                                    @click="showAdicionarConta = !showAdicionarConta">
                                                    <v-icon>mdi-plus</v-icon>
                                                </v-btn>

                                            </div>

                                        </v-card>


                                        <br>

                                        <v-expand-transition>
                                            <div>
                                                <v-card outlined class=" justify-space-between pa-4"
                                                    v-show="showAdicionarConta">
                                                    <template d-flex>
                                                        <v-row>
                                                            <v-btn class="mx-2" outlined fab color="blue-grey darken-4"
                                                                v-model="logoContaAdd" @click="dialogLogo = true">
                                                                <v-avatar size="48" align-center justify-center>
                                                                    <img alt="Icon" :src="logoConfirmadoContaAdd">
                                                                </v-avatar>
                                                            </v-btn>

                                                            <v-dialog v-model="dialogLogo" max-width="290">
                                                                <v-card>
                                                                    <v-card-title class="text-h5">

                                                                    </v-card-title>

                                                                    <v-card-text>
                                                                        <v-select :items="logos" v-model="logoContaAdd"
                                                                            item-text="nome" item-value="img"
                                                                            return-object label="Escolha um Logo:" solo>
                                                                        </v-select>
                                                                    </v-card-text>

                                                                    <div class="text-center">
                                                                        <v-avatar size="62" align-center justify-center>
                                                                            <img alt="user" :src="logoContaAdd.img">
                                                                        </v-avatar>
                                                                    </div>



                                                                    <v-card-actions>
                                                                        <v-spacer></v-spacer>

                                                                        <v-btn color="green darken-1" text
                                                                            @click="dialogLogo = false">
                                                                            Cancelar
                                                                        </v-btn>

                                                                        <v-btn color="green darken-1" text
                                                                            @click="dialogLogo = false; logoConfirmadoContaAdd = logoContaAdd.img">
                                                                            Salvar
                                                                        </v-btn>
                                                                    </v-card-actions>
                                                                </v-card>
                                                            </v-dialog>

                                                            <v-text-field type="text" v-model="carteiraContaAdd"
                                                                placeholder="Informe a Carteira" outlined
                                                                style="height: 55px;">
                                                            </v-text-field>

                                                        </v-row>
                                                        <v-row style="padding-top: 10px;">


                                                            <v-text-field type="text" v-model="nomeContaAdd"
                                                                placeholder="Informe o Nome da Conta" outlined
                                                                style="height: 55px;">
                                                            </v-text-field>

                                                        </v-row>
                                                        <v-row align="center" justify="space-around">
                                                            <v-spacer></v-spacer>
                                                            <v-btn text @click="cleanAdcionarContaFields">
                                                                Cancelar
                                                            </v-btn>
                                                            <v-btn text color="primary" @click="adcionarConta">
                                                                Salvar
                                                            </v-btn>
                                                        </v-row>

                                                    </template>

                                                </v-card>
                                                <v-card class="padCard" v-for=" c in contas" :key="c.id"
                                                    v-show="expandContas">

                                                    <v-card outlined class="d-flex justify-space-between pa-4"
                                                        @click="c.opcoesDeExibicao.showDetalhes = !c.opcoesDeExibicao.showDetalhes">

                                                        <v-avatar size="36" align-start>
                                                            <img alt="user" :src="c.logo">
                                                        </v-avatar>

                                                        <h3 class="align-self-center">{{ c.nome }}</h3>


                                                        <v-app-bar-nav-icon align-end></v-app-bar-nav-icon>

                                                    </v-card>

                                                    <v-expand-transition>

                                                        <div v-show="c.opcoesDeExibicao.showDetalhes">

                                                            <v-card-title>
                                                                <v-spacer></v-spacer>
                                                                <span @click="novoSaldo(c.id)">{{c.saldo}}</span>
                                                                <v-icon small class="mr-2 littleMarginLeft"
                                                                    @click="novoSaldo(c.id)">
                                                                    mdi-pencil
                                                                </v-icon>
                                                            </v-card-title>

                                                            <v-card-text>
                                                                Variação no mês: + 10% {{ c.close }}
                                                            </v-card-text>

                                                            <v-card-actions>
                                                                <v-btn color="dark-grey lighten-2" text block
                                                                    @click="c.opcoesDeExibicao.showHistory = !c.opcoesDeExibicao.showHistory">
                                                                    Histórico
                                                                    <v-icon>{{
                                                                        c.opcoesDeExibicao.showHistory ?
                                                                        'mdi-chevron-up'
                                                                        :
                                                                        'mdi-chevron-down' }}
                                                                    </v-icon>
                                                                </v-btn>

                                                                <v-spacer></v-spacer>


                                                            </v-card-actions>

                                                            <v-expand-transition>
                                                                <div v-show="c.opcoesDeExibicao.showHistory">
                                                                    <v-divider></v-divider>

                                                                    <v-card-text>
                                                                        <v-timeline align-top dense>

                                                                            <v-timeline-item
                                                                                v-for="mt in c.moneyTimeFlow"
                                                                                :key="mt.id" :color="mt.cor" small>
                                                                                <div>
                                                                                    <div class="font-weight-normal">
                                                                                        <strong>{{ mt.saldo }}</strong>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span class="button">{{
                                                                                            mt.momento.data
                                                                                            }}</span> - <span
                                                                                            class="caption">{{
                                                                                            mt.momento.hora }}</span>

                                                                                        <span class="float-right">
                                                                                            <v-icon small class="mr-2"
                                                                                                @click="editItem(mt.contaId, mt.id)">
                                                                                                mdi-pencil
                                                                                            </v-icon>
                                                                                            <v-icon small
                                                                                                @click="deleteItem(mt.contaId, mt.id)">
                                                                                                mdi-delete
                                                                                            </v-icon>
                                                                                        </span>

                                                                                    </div>
                                                                                </div>
                                                                            </v-timeline-item>
                                                                        </v-timeline>
                                                                    </v-card-text>
                                                                </div>
                                                            </v-expand-transition>
                                                        </div>
                                                    </v-expand-transition>
                                                </v-card>
                                            </div>

                                        </v-expand-transition>
                                    </v-col>

                                </v-row>

                            </v-card>

                            <v-dialog v-model="dialog" max-width="500px">

                                <v-card>
                                    <v-card-title>
                                        <span class="text-h5">{{ dialogTitle }}</span>
                                    </v-card-title>

                                    <v-card-text>
                                        <v-container>
                                            <v-row>
                                                <v-col cols="12" sm="6" md="4">
                                                    <v-text-field v-model="saldo" label="Saldo em R$">
                                                    </v-text-field>
                                                </v-col>
                                                <v-col cols="12" sm="6" md="4">
                                                    <!-- <v-text-field v-model="editedItem.data" label="Data">
                                                    </v-text-field> -->
                                                    <!-- <v-date-picker v-model="editedItem.data"></v-date-picker> -->
                                                    <v-menu ref="menu1" v-model="menu1" :close-on-content-click="false"
                                                        transition="scale-transition" offset-y max-width="290px"
                                                        min-width="auto">
                                                        <template v-slot:activator="{ on, attrs }">
                                                            <v-text-field v-model="dateFormatted" label="Date"
                                                                hint="DD/MM/YYYY format" persistent-hint
                                                                prepend-icon="mdi-calendar" v-bind="attrs"
                                                                @blur="date = parseDate(dateFormatted)" v-on="on">
                                                            </v-text-field>
                                                        </template>
                                                        <v-date-picker v-model="date" no-title @input="menu1 = false">
                                                        </v-date-picker>
                                                    </v-menu>
                                                </v-col>
                                                <v-col cols="12" sm="6" md="4">
                                                    <v-text-field label="Hora:" v-model="hora">
                                                    </v-text-field>
                                                </v-col>
                                            </v-row>
                                        </v-container>
                                    </v-card-text>

                                    <v-card-actions>
                                        <v-spacer></v-spacer>
                                        <v-btn color="blue darken-1" text @click="close">
                                            Cancel
                                        </v-btn>
                                        <v-btn color="blue darken-1" text @click="save">
                                            Save
                                        </v-btn>
                                    </v-card-actions>
                                </v-card>
                            </v-dialog>
                            <v-dialog v-model="dialogDelete" max-width="500px">
                                <v-card>
                                    <v-card-title class="text-h5">Are you sure you want to delete this item?
                                    </v-card-title>
                                    <v-card-actions>
                                        <v-spacer></v-spacer>
                                        <v-btn color="blue darken-1" text @click="closeDelete">Cancelar</v-btn>
                                        <v-btn color="blue darken-1" text @click="deleteItemConfirm">OK</v-btn>
                                        <v-spacer></v-spacer>
                                    </v-card-actions>
                                </v-card>
                            </v-dialog>


                        </v-col>
                        <v-spacer></v-spacer>
                        <v-col class="col-4">
                            <v-card class="pa-2" outlined tile>

                            </v-card>
                        </v-col>
                        <v-spacer></v-spacer>
                        <v-col class="col-3">
                            <v-card class="pa-2" outlined tile>

                            </v-card>
                        </v-col>
                    </v-row>
                </v-container>




                <v-container>












                </v-container>
            </v-main>
        </v-app>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

    <!-- funções ferramentais -->
    <script src="../ferramentas/funcoes-de-ordenacao.js"></script>
    <script src="../ferramentas/funcoes-de-conversao.js"></script>

    <!-- teste -->
    <script src="../dados-testes/teste-conta.js"></script>

    <!-- classes -->

    <script src="../classes/momento.js"></script>
    <script src="../classes/moneytime.js"></script>
    <script src="../classes/conta.js"></script>

    <!-- tratamento pre Vue -->
    <script src="contasPreVue.js"></script>

    <script src="vuecore.js"></script>


</body>

</html>